<!DOCTYPE html>
<html>
  <head>
    <!--Import materialize.css-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <link type="text/css" rel="stylesheet" href="../css/materialize.min.css"  media="screen,projection"/>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link type="text/css" rel="stylesheet" href="../css/custom.css"  media="screen,projection"/>
    <link rel="stylesheet" href="../css/chartist.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mustache.js/2.1.2/mustache.js"></script>
    <script src="../js/app.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.3.3/underscore-min.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/backbone.js/1.2.1/backbone.js" type="text/javascript"></script>
    <script type"javascript" src="./js/helpers/backbone.stickit.js"></script>

    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  </head>
  <body>
    <!-- Navigation -->
    <nav>
      <div class="nav-wrapper container">
        <a href="#" class="brand-logo"><img id="navlogo" src="../assets/venmonavlogo2.png" width="145"></a>
        <ul id="nav-mobile" class="right hide-on-med-and-down">
          <li>        
            <div class="input-field">
              <input id="search" type="search" placeholder="Search for friends...">
              <label for="search">
                <i class="material-icons">search</i>
              </label>
            </div>
          </li>
          <li><a class="modal-trigger" href="#payment-modal">Schedule Payments</a></li>
          <li><a href="#!">Something</a></li>
          <li><a href="#!">Else?</a></li>
          <li><a href="/logout">Logout</a></li>
        </ul>
      </div>
    </nav>

    <!-- Page Content -->
    <div id="page-container" class="container">
      <div id="main-view-anchor"></div>
      <!-- Large Profile Card -->
      <!-- <div id="maincard" class="col s12">
        <div class="card-panel">
          <div class="row content">
            <div class="col s3 avatar-div">
              <img src="../assets/charles.png" alt="" class="avatar responsive-img"> 
            </div>
            <div class="col s5 info">
              <h3 class="username">Charles Lai</h3>
              <div class="balance">Current Balance: <span class="green-font">Value</span></div>
              <div class="ratio">ratio!</div>
              <div class="graph">graph?</div>
            </div>
            <div class="col s4">
              <div id="my-graph" class="ct-chart ct-perfect-fourth"></div>
            </div>
          </div>
        </div>
      </div> -->

      <!-- Main Grid/Row holding friend cards -->
      <ul class="collapsible popout" data-collapsible="accordion">
        <li>
          <div class="collapsible-header"><i class="material-icons">payment</i>Schedule Payments and Charges</div>
          <div class="collapsible-body">
            <div id="form-row" class="row">
              <div id="form-col" class="col s12">
                <div class="card-panel">
                  <h5>Payment/Charge</h5>
                  <div class="row">
                    <form class="col s12">
                      <div class="row">
                        <div class="input-field col s3">
                          <input id="email" type="text" class="validate">
                          <label for="email">Email</label>
                        </div>
                        <div class="input-field col s3">
                          <input id="amount" type="number" min="0.01" step="0.01" max="2500" value="" />
                          <label for="amount">Amount</label>
                        </div>
                        <div class="input-field col s3">
                          <input id="date" type="date" class="datepicker">
                        </div>
                        <div class="input-field col s3">
                          <input id="time" type="text">
                        </div>
                        <div class="input-field col s12">
                          <input id="note" type="text" class="validate">
                          <label for="note">Note</label>
                        </div>
                      </div>
                      <div class="switch">
                        <label>
                          Private
                          <input id="social" type="checkbox">
                          <span class="lever"></span>
                          Public
                        </label>
                      </div>
                    </form>
                  </div>
                  <a id="pay" class=" waves-effect waves-light deep-orange lighten-2 btn-flat">Pay</a>
                  <a id="charge" class=" waves-effect waves-light light-green lighten-2 btn-flat">Charge</a>
                </div>
              </div>
            </div>
          </div>
        </li>
      </ul>
      <div id="card-grid" class="row">

        <!-- Card Structure for Grid View
        <div class="col l4 m6 s12">
          <div class="card-panel">
            <div class="row content">
              <div class="col s3 avatar-div">
                <img src="../assets/charles.png" alt="" class="avatar responsive-img">
              </div>
              <div class="col s9 info">
                <div class="username">Charles Lai</div>
                <div class="ratio">ratio!</div>
                <div class="progress">
                  <div class="progress-bar progress-bar-success" style="width: 90%">
                    <span class="sr-only">$90</span>
                  </div>
                  <div class="progress-bar progress-bar-danger" style="width: 10%">
                    <span class="sr-only">$10</span>
                  </div>
                </div>
                <a class="modal-trigger waves-effect waves-light  btn light-blue lighten-3" href="#modal1">Details</a>
              </div>
            </div>
          </div>
        </div>

        <div id="modal1" class="modal">
          <div class="modal-content">
            <h4>Username</h4>
            <p>Info about the user</p>
            <div class="row">
              <div class="col s4 graph">Graphs?</div>
              <div class="col s4 graph">Graphs?</div>
              <div class="col s4 graph">Graphs?</div>
            </div>
          </div>
          <div class="modal-footer">
            <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">Exit</a>
            <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">Pay</a>
            <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">Charge</a>
          </div>
          </div>-->
        <div id="payment-modal" class="modal">
          <div class="modal-content">
            <h4>Payment/Charge</h4>
            <div class="row">
              <form class="col s12">
                <div class="row">
                  <div class="input-field col s12">
                    <input id="email" type="text" class="validate">
                    <label for="email">Email</label>
                  </div>
                </div>
                <div class="row">
                  <div class="input-field col s12">
                    <textarea id="note" class="materialize-textarea"></textarea>
                    <label for="textarea1">Note</label>
                  </div>
                </div>
                <div class="row">
                  <div class="input-field col s12">
                    <input id="amount" type="number" min="0.01" step="0.01" max="2500" value="" />
                    <label for="amount">Amount</label>
                  </div>
                </div>
                <div class="row">
                  <div class="input-field col s12">
                    <input id="date" type="date" class="datepicker">
                  </div>
                </div>
                <div class="switch">
                  <label>
                    Private
                    <input id="social" type="checkbox">
                    <span class="lever"></span>
                    Public
                  </label>
                </div>
              </form>
            </div>
          </div>
          <div class="modal-footer">
            <a id="exit" class=" modal-action modal-close waves-effect waves-light grey lighten-3 btn-flat">Exit</a>
            <a id="pay" class=" waves-effect waves-light deep-orange lighten-2 btn-flat">Pay</a>
            <a id="charge" class=" waves-effect waves-light light-green lighten-2 btn-flat">Charge</a>
          </div>
        </div>

      </div>

    <!--Import jQuery before materialize.js-->
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script type="text/javascript" src="../js/materialize.min.js"></script>
    <script type="text/javascript" src="../js/chartist.min.js"></script>
    <script src="http://netdna.bootstrapcdn.com/bootstrap/3.1.0/js/bootstrap.min.js"></script>
    
    <!-- Form Handling for Payments and Modal -->
    <script type="text/javascript">  
      $(document).ready(function(){

          $('.modal-trigger').leanModal({
            dismissible: true, // Modal can be dismissed by clicking outside of the modal
            opacity: .5, // Opacity of modal background
            in_duration: 300, // Transition in duration
            out_duration: 200, // Transition out duration
            ready: function() {}, // Callback for Modal open
            complete: function() {} // Callback for Modal close
          });
          // Pay button clicked
          $('#pay').click(function(event) {
            var email = $("#email").val();
            var note = $("#note").val();
            var amount = $("#amount").val();
            var date = $("#date").val();
            var social = $("#social").is(":checked");
            $.ajax({
              url: '/payment',
              type: 'POST',
              dataType: 'json',
              contentType: "application/json",
              data: JSON.stringify({
                email: email,
                note: note,
                amount: amount,
                date: date,
                social: social
              }),
            })
            .done(function() {
              console.log("success");
            })
            .fail(function() {
              console.log("error");
            })
          });

          // Charge button clicked
          $('#charge').click(function(event) {
            var email = $("#email").val();
            var note = $("#note").val();
            var amount = $("#amount").val();
            var date = $("#date").val();
            var social = $("#social").is(":checked");
            $.ajax({
              url: '/payment',
              type: 'POST',
              dataType: 'json',
              contentType: "application/json",
              data: JSON.stringify({
                email: email,
                note: note,
                amount: -amount,
                date: date,
                social: social
              }),
            })
            .done(function() {
              console.log("success");
            })
            .fail(function() {
              console.log("error");
            })
          });
      });
    </script>
  </body>
</html>
      
